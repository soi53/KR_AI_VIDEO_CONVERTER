# 프론트엔드 명세

## 1. 개요

이 문서는 비디오 번역 및 더빙 자동화 도구의 프론트엔드 구현에 대한 세부 사항을 정의합니다. React와 TypeScript를 기반으로 하며, 사용자 친화적인 인터페이스를 통해 비디오 업로드, 자막 추출(OpenAI Whisper API 기반), 자막 편집, 번역, TTS 설정 및 더빙된 결과물 미리보기까지의 전체 과정을 지원합니다.

## 2. 기술 스택

- **프레임워크**: React 18.x
- **언어**: TypeScript 5.x
- **상태 관리**: Redux Toolkit
- **스타일링**: TailwindCSS
- **컴포넌트 라이브러리**: Chakra UI
- **비디오 처리**: FFmpeg-wasm, React-Player
- **자막 편집**: Custom React components
- **HTTP 클라이언트**: Axios
- **테스트**: Jest, React Testing Library
- **빌드 도구**: Vite

## 3. 페이지 구조

### 3.1 인증 페이지
- 로그인 폼
- 회원가입 폼
- 비밀번호 재설정
- 소셜 로그인 옵션

### 3.2 대시보드 페이지
- 사용자 프로젝트 목록 (그리드/리스트 뷰)
- 프로젝트 정렬 및 필터링 옵션
- 새 프로젝트 생성 버튼
- 사용 통계 및 계정 정보

### 3.3 비디오 업로드 페이지
- 파일 드래그 앤 드롭 영역
- 업로드 진행 상태 표시
- 비디오 메타데이터 입력 폼
- 기존 자막 업로드 옵션

### 3.4 자막 추출 페이지 (Whisper API)
- 비디오 플레이어
- Whisper API 모델 선택 (tiny, base, small, medium, large-v3)
- 언어 감지/지정 옵션
- 세그먼트 설정 (최대 길이, 최소 묵음 등)
- 추출 진행 상태 모니터링
- 추출 결과 미리보기

### 3.5 자막 편집 페이지
- 비디오 플레이어와 동기화된 자막 에디터
- 타임라인 기반 세그먼트 조정
- 텍스트 편집 인터페이스
- 스타일링 및 포맷팅 옵션
- 자동 저장 기능

### 3.6 번역 설정 페이지
- 타겟 언어 선택 (다중 선택 지원)
- 번역 모델 및 옵션 설정
- 번역 톤 및 스타일 설정
- 용어집 관리 인터페이스
- 컨텍스트 힌트 입력 영역

### 3.7 번역 편집 페이지
- 원본/번역 텍스트 병렬 표시
- 세그먼트별 번역 편집 기능
- 일괄 편집 도구
- 맥락 참조 도구
- 자동 저장 기능

### 3.8 TTS 설정 페이지
- 언어별 음성 선택
- 음성 속성 조정 (속도, 피치, 볼륨)
- 세그먼트 미리듣기 기능
- 음성 프로필 저장 기능
- 세그먼트간 침묵 시간 설정

### 3.9 최종 비디오 페이지
- 더빙된 비디오 플레이어
- 출력 형식 및 품질 설정
- 자막 스타일링 옵션
- 다운로드 및 공유 기능
- 프로젝트 저장 옵션

## 4. 컴포넌트 구조

### 4.1 공통 컴포넌트

#### 4.1.1 NavBar
- 페이지 이동 메뉴
- 사용자 프로필 드롭다운
- 알림 표시
- 언어 선택

#### 4.1.2 VideoPlayer
- 비디오 재생 컨트롤
- 자막 표시 토글
- 타임코드 표시
- 재생 속도 조절
- 전체 화면 모드

#### 4.1.3 SubtitleEditor
- 타임코드 기반 세그먼트 렌더링
- 인라인 텍스트 편집
- 세그먼트 분할/병합
- 타임코드 조정
- 웨이브폼 시각화 (선택적)

#### 4.1.4 ProgressTracker
- 진행률 표시
- 단계별 상태 표시
- 예상 완료 시간
- 오류 알림

#### 4.1.5 FileUploader
- 드래그 앤 드롭 영역
- 파일 선택 버튼
- 업로드 진행률 표시
- 파일 형식 검증

### 4.2 Whisper API 관련 컴포넌트

#### 4.2.1 WhisperModelSelector
- 모델 크기 선택 라디오 버튼 (tiny, base, small, medium, large-v3)
- 각 모델의 특성 설명
- 선택된 모델에 따른 처리 시간 예상

#### 4.2.2 WhisperLanguageSettings
- 언어 자동 감지 토글
- 언어 드롭다운 선택기
- 다국어 인식 옵션

#### 4.2.3 WhisperSegmentSettings
- 최대 세그먼트 길이 슬라이더
- 최소 묵음 간격 설정
- 타임스탬프 정밀도 옵션 (세그먼트/단어)
- 고급 설정 확장 패널 (response_format, temperature, initial_prompt 등)

#### 4.2.4 WhisperExtractProgress
- 추출 단계 표시기
- 실시간 진행률 바
- 남은 시간 예상
- 현재 처리 중인 비디오 부분

#### 4.2.5 WhisperResultPreview
- 추출된 자막 미리보기
- 신뢰도 점수 시각화
- 문제 영역 강조 표시
- 빠른 수정 도구

### 4.3 번역 관련 컴포넌트

#### 4.3.1 LanguageSelector
- 지원되는 언어 그리드
- 검색 필터
- 최근/자주 사용하는 언어

#### 4.3.2 TranslationModelSettings
- 모델 선택 (GPT-4, GPT-3.5-Turbo 등)
- 품질/속도 트레이드오프 설정
- 고급 매개변수 조정

#### 4.3.3 TranslationStyleSettings
- 톤 선택 (공식적, 회화체, 캐주얼 등)
- 용어 일관성 설정
- 특수 지침 입력 영역

#### 4.3.4 GlossaryManager
- 용어집 항목 추가/편집
- 용어집 파일 가져오기/내보내기
- 용어 미리보기

#### 4.3.5 TranslationEditor
- 원본/번역 텍스트 병렬 표시
- 세그먼트별 편집 기능
- 문맥 참조 도구
- 일관성 검사

### 4.4 TTS 관련 컴포넌트

#### 4.4.1 VoiceSelector
- 음성 목록 (성별, 억양, 샘플 별)
- 음성 미리듣기
- 필터 및 검색

#### 4.4.2 VoiceParameterControls
- 말하기 속도 슬라이더
- 피치 조정
- 볼륨 레벨
- 강세 설정

#### 4.4.3 SegmentAudioPreview
- 세그먼트별 오디오 플레이어
- 재생/일시정지 컨트롤
- 파형 시각화
- 편집 이력

#### 4.4.4 SilenceSettingsControl
- 세그먼트간 침묵 조정
- 자연스러운 일시정지 옵션
- 전체 오디오 길이 표시

#### 4.4.5 BatchVoiceSettings
- 다중 세그먼트 일괄 설정
- 화자별 음성 할당
- 프리셋 저장 및 로드

### 4.5 비디오 출력 관련 컴포넌트

#### 4.5.1 VideoOutputSettings
- 해상도 선택
- 비트레이트 설정
- 코덱 옵션
- 파일 형식 선택

#### 4.5.2 SubtitleStyler
- 글꼴 선택
- 크기 및 색상 설정
- 위치 및 정렬
- 배경 및 테두리 스타일

#### 4.5.3 AudioMixSettings
- 원본 오디오 레벨 조정
- 더빙 오디오 레벨
- 페이드 인/아웃 설정
- 오디오 필터 옵션

#### 4.5.4 ExportOptions
- 파일 형식 선택
- 미디어 포함 옵션 (비디오+오디오, 오디오만, 자막만)
- 압축 설정
- 대상 장치 최적화

## 5. 상태 관리

### 5.1 주요 상태 슬라이스

#### 5.1.1 authSlice
- 로그인 상태
- 사용자 정보
- 인증 토큰
- 권한 및 역할

#### 5.1.2 projectSlice
- 프로젝트 메타데이터
- 비디오 정보
- 처리 상태
- 진행률

#### 5.1.3 subtitleSlice (Whisper API 통합)
- 추출된 자막 데이터
- 편집된 자막 상태
- Whisper API 모델 설정
- 세그먼트 메타데이터
- 신뢰도 점수

#### 5.1.4 translationSlice
- 번역 설정
- 번역된 자막 데이터
- 타겟 언어 목록
- 용어집 항목

#### 5.1.5 ttsSlice
- 음성 설정
- 생성된 오디오 정보
- 세그먼트별 음성 매핑
- 오디오 조정 설정

#### 5.1.6 exportSlice
- 출력 형식 및 설정
- 렌더링 작업 상태
- 다운로드 정보
- 공유 옵션

### 5.2 비동기 처리

#### 5.2.1 API 요청 처리
- 데이터 페칭 훅
- 로딩/에러 상태 관리
- 재시도 메커니즘
- 오프라인 지원

#### 5.2.2 백그라운드 작업
- 웹워커를 통한 계산 집약적 작업
- 장기 실행 작업 상태 폴링
- 작업 취소 처리
- 진행률 추적

#### 5.2.3 캐싱 전략
- API 응답 캐싱
- 자동 저장된 데이터 관리
- IndexedDB를 통한 로컬 스토리지
- 캐시 무효화 정책

## 6. 폼 및 검증

### 6.1 입력 유효성 검사
- 필수 필드 검증
- 형식 검증 (타임코드, 언어 코드 등)
- 길이 제한 및 유효 범위 검증
- 사용자 피드백 메시지

### 6.2 폼 상태 관리
- React Hook Form 통합
- 상호 의존적 필드 처리
- 조건부 필드 표시
- 폼 초기화 및 재설정

## 7. 사용자 인터페이스 요구사항

### 7.1 반응형 디자인
- 모바일, 태블릿, 데스크톱 레이아웃
- 비디오 플레이어 응답형 조정
- 에디터 레이아웃 적응
- 터치 인터페이스 최적화

### 7.2 접근성
- WCAG 2.1 AA 준수
- 스크린 리더 호환성
- 키보드 탐색 지원
- 고대비 모드 지원

### 7.3 다국어 지원
- 인터페이스 다국어 지원
- RTL 언어 레이아웃
- 날짜, 시간, 숫자 포맷 지역화
- 사용자 언어 감지 및 기본값 설정

### 7.4 테마
- 라이트/다크 모드
- 사용자 정의 색상 테마
- 브랜드 스타일 통합
- 테마 전환 애니메이션

## 8. Whisper API 통합 상세

### 8.1 자막 추출 프로세스 UI 흐름

1. **모델 선택 단계**
   - 모델 옵션 표시 (tiny, base, small, medium, large-v3)
   - 각 모델의 성능 특성 및 처리 시간 설명
   - 모델 선택에 따른 계산 요구사항 표시

2. **언어 설정 단계**
   - 자동 언어 감지 토글 스위치
   - 언어 선택 드롭다운 (자동 감지가 비활성화된 경우)
   - 다국어 콘텐츠 옵션

3. **세그먼트 설정 단계**
   - 최대 세그먼트 길이 슬라이더 (초 단위)
   - 최소 묵음 길이 슬라이더 (밀리초 단위)
   - 타임스탬프 정밀도 옵션 (세그먼트 또는 단어 단위)
   - 고급 설정 섹션 (temperature, initial_prompt, response_format 등)

4. **추출 진행 상태 단계**
   - 비디오 처리 단계 표시기
   - 오디오 추출 진행률
   - Whisper API 처리 상태
   - 예상 완료 시간
   - 취소 버튼

5. **결과 확인 단계**
   - 자막 텍스트 미리보기
   - 오디오 파형과 동기화된 세그먼트 표시
   - 세그먼트별 신뢰도 점수 시각화
   - 문제 영역 표시 (낮은 신뢰도, 불명확한 발음)
   - 편집기로 계속 진행 버튼

### 8.2 Whisper 결과 시각화

- **신뢰도 히트맵**: 세그먼트 또는 단어별 신뢰도 색상 코딩
- **파형 시각화**: 오디오 파형에 자막 세그먼트 매핑
- **언어 식별**: 자동 감지된 언어 정보 표시
- **문제 지점 표시**: 낮은 신뢰도 또는 잠재적 오류 영역 강조
- **미리듣기 통합**: 세그먼트를 클릭하면 해당 부분의 오디오 재생

### 8.3 자막 데이터 관리

- **JSON 포맷 처리**: Whisper API에서 반환된 JSON 구조 파싱 및 표시
- **세그먼트 모델링**: 시작/종료 시간, 텍스트, 신뢰도, 언어 정보 포함
- **다양한 형식 지원**: SRT, VTT, TXT 등으로 내보내기 옵션
- **메타데이터 보존**: 언어 감지, 평균 신뢰도 등의 추가 정보 저장
- **버전 관리**: 원본 및 편집된 자막 간의 변경 사항 추적

### 8.4 오류 처리 및 대체 흐름

- **언어 감지 실패**: 사용자에게 알림 및 수동 언어 선택 요청
- **낮은 오디오 품질**: 품질 저하 감지 시 사용자에게 알림 및 개선 제안
- **처리 오류**: API 오류 발생 시 사용자 친화적 메시지 및 재시도 옵션
- **대체 입력 경로**: 자막 파일 직접 업로드 옵션 제공
- **부분 성공 처리**: 일부 세그먼트만 성공적으로 추출된 경우 대처 방법

## 9. 성능 최적화

### 9.1 로딩 성능
- 코드 분할 및 지연 로딩
- 자원 우선순위 지정
- 이미지 최적화
- 폰트 최적화

### 9.2 런타임 성능
- 메모이제이션 전략
- 가상화된 리스트 (긴 자막 목록용)
- 디바운싱 및 스로틀링
- 웹 워커 활용

### 9.3 비디오 처리 최적화
- 스트리밍 재생 최적화
- 비디오 품질 자동 조정
- 데이터 사용량 관리
- 하드웨어 가속 활용

## 10. 테스트 전략

### 10.1 단위 테스트
- 순수 함수 테스트
- 컴포넌트 렌더링 테스트
- 상태 변경 테스트
- 유틸리티 함수 테스트

### 10.2 통합 테스트
- 컴포넌트 상호작용 테스트
- API 통합 테스트
- Redux 흐름 테스트
- 사이드 이펙트 테스트

### 10.3 E2E 테스트
- 주요 사용자 흐름 테스트
- 크로스 브라우저 테스트
- 반응형 디자인 테스트
- 접근성 테스트

### 10.4 성능 테스트
- 로딩 시간 측정
- 메모리 사용량 분석
- 렌더링 성능 측정
- 네트워크 요청 최적화 테스트